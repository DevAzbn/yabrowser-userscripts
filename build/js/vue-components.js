"use strict";Vue.component("block-container",{template:"#block-container",mixins:[vueMixins.common],props:["params"],inject:["getContext"],data:function(){return{default:{component_base_name:"block-field__{{block}}"},container:{tag:"div",class:""},flags:{}}},computed:{renderTemplate:function(){var t=this,e=[],n=t.params.blocks||[],i=t.default;for(var o in e.push("<"+t.container.tag+' class="'+t.container.class+'" >'),n){var s=n[o],a=s.component?i.component_base_name.replace("{{block}}",s.component):"";Vue.options.components[a]||(a=i.component_base_name.replace("{{block}}",t.params.ns.tpl+"__input--text")),Vue.options.components[a]||(a=i.component_base_name.replace("{{block}}","view__string--default")),Vue.options.components[a]&&e.push("\n\t\t\t\t\t<".concat(a,'\n\t\t\t\t\t\tv-bind:params="params"\n\t\t\t\t\t\tv-bind:index="').concat(o,'"\n\t\t\t\t\t\tv-bind:block="params.blocks[').concat(o,']"\n\t\t\t\t\t\tv-bind:value="params.blocks[').concat(o,'].value"\n\t\t\t\t\t></').concat(a,">\n\t\t\t\t\t"))}return e.push("</"+t.container.tag+">"),{template:e.join(""),props:[],data:function(){return{params:t.params}}}}},provide:function(){var t=this;return{getContainer:function(){return t}}}}),Vue.component("common-footer",{template:"#common-footer",mixins:[vueMixins.common],props:[]}),Vue.component("common-header",{template:"#common-header",mixins:[vueMixins.common],props:[],data:function(){return{buttonActive:!1,session:this.$store.getters.getSession()}},methods:{logOut:function(){var i=this,o=i.$store,s=i.$router;$mctrl.get("Api").call("Session/Logout",null,null,function(t,e,n){i.$store.dispatch("setSession",{profile:null}),o.getters.getFlag("isAuth")||s.push("/public/login/")})},hamb:function(){var t=this;t.$store.commit("setFlag",{menuOpen:!t.$store.getters.getFlag("menuOpen")}),t.buttonActive=!t.buttonActive},changeNearStranger:function(){var t=this;t.$store.commit("setFlag",{nearStranger:!t.$store.getters.getFlag("nearStranger")}),$mctrl.get("Api").call("Runtime/Profile/NearStranger",{near:t.$store.getters.getFlag("nearStranger")?1:0},null,function(t,e,n){})}},computed:{photo_path:function(){var t=null,e=$mctrl.get("Api").getApiParams(),n=this.$store;return n.state.session&&n.state.session.photo&&n.state.session.photo.item&&n.state.session.photo.item.id&&""!=n.state.session.photo.item.path&&(t=e.url.upload+n.state.session.photo.item.path),t}}}),Vue.component("common-loading",{template:"#common-loading",mixins:[vueMixins.common],props:[],inject:[],data:function(){return{}}}),Vue.component("common-menu",{template:"#common-menu",mixins:[vueMixins.common],props:["menutype","children"],inject:[],data:function(){return{items:this.children?this.children:this.$store.state.menu[this.menutype]}}}),Vue.component("common-modals",{mixins:[vueMixins.common],data:function(){return{items:this.$store.getters.getModals}},created:function(){this.$options.render=Vue.compile(this.template_generator()).render},methods:{template_generator:function(){var t=this,e="";if(t.items&&t.items.length)for(var n in t.items){var i=t.items[n];e=e+'<div class="modal-mask" ><div class="modal-wrapper"><'+i.uid+' class="modal-container" v-require-local:'+this.component_point_name(i.component)+' v-bind:index="'+n+'" v-bind:uid="items['+n+'].uid" v-bind:params="items['+n+'].params" >'+i.uid+" : "+i.component+"</"+i.uid+"></div></div>"}return'<div v-if="items.length" >'+e+"</div>"},component_point_name:function(t){return t.split("/").join(".")}},watch:{items:function(t,e){this.$options.render=Vue.compile(this.template_generator()).render}}}),Vue.component("common-pagination",{template:"#common-pagination",mixins:[vueMixins.common],props:["pagination"],data:function(){return{}},computed:{page_real:function(){return 0<this.pagination.page?this.pagination.page-1:0},pages:function(){return Math.ceil(this.pagination.amount/this.pagination.size)}}}),Vue.component("common-uploads",{template:"#common-uploads",mixins:[vueMixins.common],data:function(){return{}}}),Vue.component("view-value",{mixins:[vueMixins.common],props:["template","value"],inject:["getContext","getContainer"],data:function(){return{flags:{}}},created:function(){var t=this;t.template||(t.template="string--default"),t.$options.template="#"+t.$options.name+"__"+t.template},filters:{string__default:function(t){return void 0===t?"":t},string__pass:function(t){return"*****"},number__datetime:function(t){if(void 0===t)return"";t=parseInt(t);var e=new Date(1e3*t);return[e.toLocaleDateString(),e.toLocaleTimeString()].join(" ")},number__pos:function(t){return void 0===t?"":Math.ceil(t/0x8000000000000000*100)}}}),Vue.component("common-app-auth",{template:"#common-app-auth",mixins:[vueMixins.common,vueMixins.auth],props:[],inject:[],data:function(){return{session:this.$store.getters.getSession()}},mounted:function(){},methods:{}}),Vue.component("common-app-public",{template:"#common-app-public",mixins:[vueMixins.common,vueMixins.public],props:[],inject:[],data:function(){return{flags:{}}}}),Vue.component("common-span-icon",{template:"#common-span-icon",mixins:[vueMixins.common],props:[],data:function(){return{}},computed:{}}),Vue.component("incomings",{template:"#incomings",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/incomings/",component:Vue.options.components.incomings,page:{title:""}}),Vue.component("inspections",{template:"#inspections",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/inspections/",component:Vue.options.components.inspections,page:{title:""}}),Vue.component("mainpage",{template:"#mainpage",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/",component:Vue.options.components.mainpage,page:{title:""}}),vueRoutes.push({path:"/mainpage/",component:Vue.options.components.mainpage,page:{title:""}}),Vue.component("meetings",{template:"#meetings",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/meetings/",component:Vue.options.components.meetings,page:{title:""}}),Vue.component("shows",{template:"#shows",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/shows/",component:Vue.options.components.shows,page:{title:""}}),Vue.component("style",{template:"#style",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{}}}),vueRoutes.push({path:"/style/",component:Vue.options.components.style,page:{title:""}}),Vue.component("team",{template:"#team",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/team/",component:Vue.options.components.team,page:{title:""}}),Vue.component("public-login",{template:"#public-login",mixins:[vueMixins.common,vueMixins.public],props:[],inject:[],created:function(){var t=this.$store,e=this.$router;t.getters.getFlag("isAuth")&&e.push("/")},data:function(){return{form:{login:"",pass:""},flags:{errors:{empty_login:!1,empty_pass:!1,wrong_access:!1},states:{in_process:!1}}}},methods:{sendForm:function(t){if((i=this).flags.errors.empty_login=!1,i.flags.errors.empty_pass=!1,i.flags.errors.wrong_access=!1,i.form.login&&""!=i.form.login||(i.flags.errors.empty_login=!0),i.form.pass&&""!=i.form.pass||(i.flags.errors.empty_pass=!0),!i.flags.errors.empty_login&&!i.flags.errors.empty_pass){var i,o={login:(i=i).form.login,pass:i.form.pass};i.flags.states.in_process=!0,$mctrl.get("Api").call("Session/Login",o,null,function(t,e,n){i.flags.states.in_process=!1,e&&e.profile&&e.profile.item&&e.profile.item.id?$mctrl.get("vueApp").$store.dispatch("setSession",e):(i.flags.errors.wrong_access=!0,i.form.pass="",$mctrl.get("Events").log({wrong_access:o},i))})}}}}),vueRoutes.push({path:"/public/login/",component:Vue.options.components["public-login"],page:{title:""}}),Vue.component("common-dev-component-viewer",{mixins:[vueMixins.common],props:["component","props"],data:function(){return{}},created:function(){this.$options.render=Vue.compile(this.template_generator()).render},methods:{template_generator:function(){return"<".concat(this.component_valid_name," v-require-local:").concat(this.component_point_name," ").concat(this.props," >{{component_point_name}} ({{component}})</").concat(this.component_valid_name,">")}},computed:{component_point_name:function(){return this.component.split("/").join(".")},component_valid_name:function(){return this.component.split("/").join("-")},props_str:function(){return this.props}},watch:{component:function(t,e){this.$options.render=Vue.compile(this.template_generator()).render,this.$forceUpdate()},props:function(t,e){this.$options.render=Vue.compile(this.template_generator()).render,this.$forceUpdate()}}}),Vue.component("common-dev-errors-list",{template:"#common-dev-errors-list",mixins:[vueMixins.common],filters:{getJSON:function(t){return $mctrl.get("Debug").ed(t)}}}),Vue.component("field-edit__submit",{template:"#field-edit__submit",mixins:[vueMixins.common],props:[],inject:[],data:function(){return{flags:{}}}}),Vue.component("field-edit__upload",{template:"#field-edit__upload",mixins:[vueMixins.common],props:["namespace","multiple"],inject:[],data:function(){return{items:[],flags:{in_process:!1}}},methods:{upload:function(t){var o=this,e=t;e&&$mctrl.get("Api").upload("Upload/Multiple",e.target.files,{namespace:o.namespace},function(t,e,n){if(t)console.dir(t);else if(e&&e[o.namespace]&&e[o.namespace].length)for(var i=0;i<e[o.namespace].length;i++)o.items.push(e[o.namespace][i])},function(t){})}}}),Vue.component("contract_ad",{template:"#contract_ad",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/contract/ad/",component:Vue.options.components.contract_ad,page:{title:""}}),Vue.component("contract_bay",{template:"#contract_bay",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/contract/bay/",component:Vue.options.components.contract_bay,page:{title:""}}),Vue.component("contract_sale",{template:"#contract_sale",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/contract/sale/",component:Vue.options.components.contract_sale,page:{title:""}}),Vue.component("auth-dev-component",{template:"#auth-dev-component",mixins:[vueMixins.common],data:function(){return{component:null,props:"",component_t:"dev/test/comp",props_t:'v-bind:x="9876543210"'}},created:function(){var t=this;t.component_t=t.component_t||(t.$route.query&&t.$route.query.component?t.$route.query.component:null),t.props_t=t.props_t||(t.$route.query&&t.$route.query.props?t.$route.query.props:""),t.loadComponent()},methods:{sendForm:function(){this.$router.push("/auth/dev/component/?v="+(new Date).getTime()+"&component="+this.component_t+"&props="+this.props_t)},loadComponent:function(){var t=this;t.component=t.component_t,t.props=t.props_t,t.$forceUpdate()}},watch:{$route:function(t,e){var n=this;n.component_t=n.$route.query&&n.$route.query.component?n.$route.query.component:null,n.props_t=n.$route.query&&n.$route.query.props?n.$route.query.props:"",n.loadComponent()}}}),vueRoutes.push({path:"/auth/dev/component/",component:Vue.options.components["auth-dev-component"],page:{title:""}}),Vue.component("incomings-add",{template:"#incomings-add",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/incomings/add/",component:Vue.options.components["incomings-add"],page:{title:""}}),Vue.component("incomings-edit",{template:"#incomings-edit",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/incomings/edit/",component:Vue.options.components["incomings-edit"],page:{title:""}}),Vue.component("incomings-view",{template:"#incomings-view",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/incomings/view/",component:Vue.options.components["incomings-view"],page:{title:""}}),Vue.component("inspections-add",{template:"#inspections-add",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/inspections/add/",component:Vue.options.components["inspections-add"],page:{title:""}}),Vue.component("inspections-edit",{template:"#inspections-edit",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/inspections/edit/",component:Vue.options.components["inspections-edit"],page:{title:""}}),Vue.component("inspections-view",{template:"#inspections-view",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/inspections/view/",component:Vue.options.components["inspections-view"],page:{title:""}}),Vue.component("me-access",{template:"#me-access",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{levels:[],flags:{}}},computed:{accesses:function(){var t=this.$store,e={};this.levels=[];var n=t.getters.getSession().profile.access;for(var i in n){var o=this.levels.push(i),s=n[i];for(var a in s){var u=s[a];u.length&&(e[a]||(e[a]={}),e[a][o]||(e[a][o]=[]),e[a][o]=u)}}return e}}}),vueRoutes.push({path:"/me/access/",component:Vue.options.components["me-access"],page:{title:""}}),Vue.component("me-edit",{template:"#me-edit",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{namespace:$mctrl.randstr(),multiple:!1,flags:{}}},created:function(){this.$store},methods:{uploadPhoto:function(t){var o=this;o.$store.dispatch("uploadFile",{namespace:o.namespace,multiple:o.multiple,cb:function(t,e,n){if(e&&e[o.namespace]&&e[o.namespace]&&e[o.namespace].length){var i=e[o.namespace][0];i&&i.item&&i.item.id&&(o.photo=i,$mctrl.get("Api").call("Session/Update/Photo",{item:{id:i.item.id}},{},function(t,e,n){$mctrl.get("vueApp").$store.dispatch("setSession",e)}))}}})}},computed:{photo_path:function(){var t=null,e=$mctrl.get("Api").getApiParams(),n=this.$store;return n.state.session&&n.state.session.photo&&n.state.session.photo.item&&n.state.session.photo.item.id&&""!=n.state.session.photo.item.path&&(t=e.url.upload+n.state.session.photo.item.path),t}}}),vueRoutes.push({path:"/me/edit/",component:Vue.options.components["me-edit"],page:{title:""}}),Vue.component("meetings-add",{template:"#meetings-add",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/meetings/add/",component:Vue.options.components["meetings-add"],page:{title:""}}),Vue.component("meetings-edit",{template:"#meetings-edit",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/meetings/edit/",component:Vue.options.components["meetings-edit"],page:{title:""}}),Vue.component("meetings-view",{template:"#meetings-view",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/meetings/view/",component:Vue.options.components["meetings-view"],page:{title:""}}),Vue.component("shows-add",{template:"#shows-add",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/shows/add/",component:Vue.options.components["shows-add"],page:{title:""}}),Vue.component("shows-edit",{template:"#shows-edit",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/shows/edit/",component:Vue.options.components["shows-edit"],page:{title:""}}),Vue.component("shows-view",{template:"#shows-view",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/shows/view/",component:Vue.options.components["shows-view"],page:{title:""}}),Vue.component("field-edit__input--text",{template:"#field-edit__input--text",mixins:[vueMixins.common],props:["field_index","field_uid","parent_params","parent_entity"],inject:["fieldChange"],data:function(){return{value:this.parent_entity&&this.field_uid&&void 0!==this.parent_entity[this.field_uid]?this.parent_entity[this.field_uid]:null,flags:{}}},watch:{value:function(t,e){this.fieldChange({uid:this.field_uid,value:t,old_value:e})}},methods:{}}),Vue.component("auth-admin-entity-add",{template:"#auth-admin-entity-add",mixins:[vueMixins.common,vueMixins.auth],props:[],inject:[],provide:function(){return{fieldChange:this.fieldChange}},data:function(){return{entity_class_id:0,entity_class:{},item:{},fields:[],flags:{}}},created:function(){var t=this;t.entity_class_id=t.$route.params&&t.$route.params.entity_class_id?t.$route.params.entity_class_id:0,t.entity_class_id&&t.loadClass(t)},methods:{loadClass:function(a){var t={entity_class:{id:a.entity_class_id}};$mctrl.get("Api").call("Entity/Classes/Fields",t,null,function(t,e,n){a.entity_class=e;var i=[];for(var o in a.entity_class.fields)i.push({uid:o,params:a.entity_class.fields[o]});a.fields=i;var s=$mctrl.get("Classes").buildEntity(a.entity_class_id,"\\Common\\Entity");s.entity_class.id||s.mergeEntityClass({id:a.entity_class.id,entity_class:a.entity_class.entity_class}),a.item=s})},save:function(){var e=this;e.item.save(function(t){e.$router.push("/entity/items/"+e.entity_class_id+"/"+t.item("id")+"/")})},fieldChange:function(t){this.item.item(t.uid,t.value)}}}),vueRoutes.push({path:"/auth/admin/entity/items/:entity_class_id/add/",component:Vue.options.components["auth-admin-entity-add"],page:{title:""}}),Vue.component("auth-admin-entity-classes",{template:"#auth-admin-entity-classes",mixins:[vueMixins.common,vueMixins.auth],props:[],inject:[],data:function(){return{entity_classes:[],flags:{}}},created:function(){var e=this;$mctrl.get("aCRM").loadEntityClasses(function(t){e.entity_classes=Object.values(t)})},methods:{loadClasses:function(i){$mctrl.get("Api").call("Entity/Classes",null,null,function(t,e,n){i.entity_classes=e})}}}),vueRoutes.push({path:"/auth/admin/entity/classes/",component:Vue.options.components["auth-admin-entity-classes"],page:{title:""}}),Vue.component("auth-admin-entity-edit",{template:"#auth-admin-entity-edit",mixins:[vueMixins.common,vueMixins.auth],props:[],inject:[],provide:function(){return{fieldChange:this.fieldChange}},data:function(){return{entity_class_str:0,entity_class_id:0,entity_class:{},entity_id:0,item_id:0,item:{},fields:[],flags:{}}},created:function(){var e=this;e.entity_class_str=e.$route.query&&e.$route.query.entity_class?e.$route.query.entity_class:0,e.entity_class_id=e.$route.params&&e.$route.params.entity_class_id?e.$route.params.entity_class_id:0,e.entity_class_str&&e.entity_id&&$mctrl.get("aCRM").loadEntityClasses(function(t){e.entity_class=t[e.entity_class_str],$mctrl.get("aCRM").load(e.entity_class_str,{id:e.entity_id},function(t){e.entity=t})})},methods:{loadClass:function(a){var t={entity_class:{id:a.entity_class_id}};$mctrl.get("Api").call("Entity/Classes/Fields",t,null,function(t,e,n){a.entity_class=e;var i=[];for(var o in a.entity_class.fields)i.push({uid:o,params:a.entity_class.fields[o]});a.fields=i;var s=$mctrl.get("Classes").buildEntity(a.entity_class_id,"\\Common\\Entity");s.entity_class.id||s.mergeEntityClass({id:a.entity_class.id,entity_class:a.entity_class.entity_class}),s.load(a.item_id,function(t){a.item=t})})},save:function(){var e=this;e.item.save(function(t){e.$router.push("/entity/items/"+e.entity_class_id+"/"+t.item("id")+"/")})},fieldChange:function(t){this.item.item(t.uid,t.value)}}}),vueRoutes.push({path:"/auth/admin/entity/items/:entity_class_id/:entity_id/edit/",component:Vue.options.components["auth-admin-entity-edit"],page:{title:""}}),Vue.component("auth-admin-entity-item",{template:"#auth-admin-entity-item",mixins:[vueMixins.common,vueMixins.auth],props:[],inject:[],data:function(){return{entity_class_str:0,entity_class:{},entity_class_id:0,entity_id:0,entity:{},flags:{}}},created:function(){var e=this;e.entity_class_id=e.$route.params&&e.$route.params.entity_class_id?e.$route.params.entity_class_id:0,e.entity_class_str=e.$route.query&&e.$route.query.entity_class?e.$route.query.entity_class:0,e.entity_id=e.$route.query&&e.$route.query.id?e.$route.query.id:0,e.entity_class_str&&e.entity_id&&$mctrl.get("aCRM").loadEntityClasses(function(t){e.entity_class=t[e.entity_class_str],$mctrl.get("aCRM").load(e.entity_class_str,{id:e.entity_id},function(t){e.entity=t})})},methods:{remove:function(){var e=this;confirm("Удалить запись из базы данных?")&&e.entity&&e.entity.item&&e.entity.item("id")&&e.entity.remove(function(t){e.$router.push("/entity/items/?entity_class="+e.entity_class_str)})}}}),vueRoutes.push({path:"/auth/admin/entity/item/",component:Vue.options.components["auth-admin-entity-item"],page:{title:""}}),Vue.component("auth-admin-entity-items",{template:"#auth-admin-entity-items",mixins:[vueMixins.common,vueMixins.auth],props:[],inject:[],data:function(){return{entity_class_str:"",entity_class_id:0,entity_class:{},fields:{},items:[],pagination:{page:1,start:1,size:50,amount:0},order_by:{id:"ASC"},where:{item:{},data:{}},flags:{}}},created:function(){var e=this;e.entity_class_str=e.$route.query&&e.$route.query.entity_class?e.$route.query.entity_class:null,e.pagination.page=parseInt(e.$route.query.page||e.pagination.start),e.entity_class_str&&$mctrl.get("aCRM").loadEntityClasses(function(t){e.entity_class=t[e.entity_class_str],e.fields=e.entity_class.fields,console.dir(e.entity_class),e.loadItems()})},methods:{loadItems:function(){var i=this,t={pagination:i.pagination,order_by:i.order_by,where:i.where};$mctrl.get("aCRM").loadItems(i.entity_class_str,t,function(t,e,n){i.items=e,i.pagination=n.pagination})}},watch:{$route:function(t,e){this.pagination.page=parseInt(t.query.page||this.pagination.start),this.loadItems()}}}),vueRoutes.push({path:"/auth/admin/entity/items/",component:Vue.options.components["auth-admin-entity-items"],page:{title:""}}),Vue.component("auth-admin-profiles-items",{template:"#auth-admin-profiles-items",mixins:[vueMixins.common,vueMixins.auth],props:[],inject:[],data:function(){return{entity_class_str:"Common\\Entity\\Profile",entity_class_id:0,entity_class:{},fields:{},items:[],pagination:{page:1,start:1,size:50,amount:0},order_by:{id:"ASC"},where:{item:{},data:{}},flags:{}}},created:function(){var e=this;e.pagination.page=parseInt(e.$route.query.page||e.pagination.start),e.entity_class_str&&$mctrl.get("aCRM").loadEntityClasses(function(t){e.entity_class=t[e.entity_class_str],e.fields=e.entity_class.fields,e.loadItems()})},methods:{loadItems:function(){var i=this,t={pagination:i.pagination,order_by:i.order_by,where:i.where};$mctrl.get("aCRM").loadItems(i.entity_class_str,t,function(t,e,n){i.items=e,i.pagination=n.pagination})}},watch:{$route:function(t,e){this.pagination.page=parseInt(t.query.page||this.pagination.start),this.loadItems()}}}),vueRoutes.push({path:"/auth/admin/profiles/items/",component:Vue.options.components["auth-admin-profiles-items"],page:{title:""}}),Vue.component("contract-ad-add",{template:"#contract-ad-add",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/contract/ad/add/",component:Vue.options.components["contract-ad-add"],page:{title:""}}),Vue.component("contract-ad-edit",{template:"#contract-ad-edit",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/contract/ad/edit/",component:Vue.options.components["contract-ad-edit"],page:{title:""}}),Vue.component("contract-ad-view",{template:"#contract-ad-view",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/contract/ad/view/",component:Vue.options.components["contract-ad-view"],page:{title:""}}),Vue.component("contract-bay-add",{template:"#contract-bay-add",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/contract/bay/add/",component:Vue.options.components["contract-bay-add"],page:{title:""}}),Vue.component("contract-bay-edit",{template:"#contract-bay-edit",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/contract/bay/edit/",component:Vue.options.components["contract-bay-edit"],page:{title:""}}),Vue.component("contract-bay-view",{template:"#contract-bay-view",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/contract/bay/view/",component:Vue.options.components["contract-bay-view"],page:{title:""}}),Vue.component("contract-sale-add",{template:"#contract-sale-add",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/contract/sale/add/",component:Vue.options.components["contract-sale-add"],page:{title:""}}),Vue.component("contract-sale-edit",{template:"#contract-sale-edit",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/contract/sale/edit/",component:Vue.options.components["contract-sale-edit"],page:{title:""}}),Vue.component("contract-sale-view",{template:"#contract-sale-view",mixins:[vueMixins.common,vueMixins.auth],props:[],data:function(){return{buildings:[],flags:{}}}}),vueRoutes.push({path:"/contract/sale/view/",component:Vue.options.components["contract-sale-view"],page:{title:""}}),Vue.component("block-field__edit__button--save",{mixins:[vueMixins.common,vueMixins.block_container__block_field__button]}),Vue.component("block-field__edit__input--text",{mixins:[vueMixins.common,vueMixins.block_container__block_field__edit]}),Vue.component("block-field__edit__input--upload",{mixins:[vueMixins.common,vueMixins.block_container__block_field__edit],data:function(){return{upload:{items:[]}}},methods:{fileUpload__afterSelect:function(t){var o=this,e=t;e&&$mctrl.get("Api").upload("Upload/Multiple",e.target.files,{namespace:o.params.ns.upload},function(t,e,n){if(t)console.dir(t);else if(e&&e[o.params.ns.upload]&&e[o.params.ns.upload].length)for(var i=0;i<e[o.params.ns.upload].length;i++)o.upload.items.push(e[o.params.ns.upload][i])},function(t){})}}}),Vue.component("block-field__edit__select--entity",{mixins:[vueMixins.common,vueMixins.block_container__block_field__edit],data:function(){return{entity_classes:[],entities:[],entity_class_id:0,entity_id:0,selected:[],filter_by:null}},created:function(){var i=this;$mctrl.get("Api").call("Entity/Classes",null,null,function(t,e,n){i.entity_classes=e})},methods:{selectItem:function(t,e){this.selected.push(e)},unselectItem:function(t,e){this.selected.splice(e,1)},loadEntities:function(){var i=this;i.entities=[];var t={entity_class:{id:i.entity_class_id}};i.filter_by&&""!=i.filter_by&&(t.where={item:{filter_by:"LIKE '%"+i.filter_by+"%'"}}),$mctrl.get("Api").call("Entity/Items",t,null,function(t,e,n){i.entities=e})}},watch:{entity_class_id:function(t,e){this.filter_by="",this.selected=[]},filter_by:function(t,e){this.loadEntities()}}}),Vue.component("block-field__view__string--default",{mixins:[vueMixins.common,vueMixins.block_container__block_field__view]}),Vue.component("entity-add-form-builder",{template:"#entity-add-form-builder",mixins:[vueMixins.common],props:["fields","entity_class"],inject:[],data:function(){return{params:this.fields,flags:{}}},computed:{items:function(){return Object.values(this.fields||{})},renderCompFnc:function(){var t=[],e=this.items||[];if(t.push('<div class="form__row  row">'),e.length)for(var n=0;n<e.length;n++){var i=e[n];t.push("\n\t\t\t\t\t<field-edit__input--text\n\t\t\t\t\t\tv-bind:field_index=\"'".concat(n,"'\"\n\t\t\t\t\t\tv-bind:field_uid=\"'").concat(i.uid,'\'"\n\t\t\t\t\t\tv-bind:field_value="\'\'"\n\t\t\t\t\t\tv-bind:parent_params="params"\n\t\t\t\t\t></field-edit__input--text>\n\t\t\t\t\t'))}return t.push("</div>"),{template:t.join(""),props:["parent_params"],data:function(){return{params:this.parent_params}}}}}}),Vue.component("entity-edit-form-builder",{template:"#entity-edit-form-builder",mixins:[vueMixins.common],props:["fields","entity_class","entity"],inject:[],data:function(){return{params:this.fields,flags:{}}},computed:{items:function(){return Object.values(this.fields||{})},renderCompFnc:function(){var t=[],e=this.items||[];if(t.push("<div>"),e.length)for(var n=0;n<e.length;n++){var i=e[n];t.push("\n\t\t\t\t\t<field-edit__input--text\n\t\t\t\t\t\tv-bind:field_index=\"'".concat(n,"'\"\n\t\t\t\t\t\tv-bind:field_uid=\"'").concat(i.uid,'\'"\n\t\t\t\t\t\tv-bind:parent_params="params"\n\t\t\t\t\t\tv-bind:parent_entity="entity"\n\t\t\t\t\t></field-edit__input--text>\n\t\t\t\t\t'))}return t.push("</div>"),{template:t.join(""),props:["parent_params","parent_entity"],data:function(){return{params:this.parent_params,entity:this.parent_entity}}}}}});