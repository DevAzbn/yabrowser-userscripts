"use strict";window.onerror=function(t,e,i,s,n){console.dir(arguments)};var vueRoutes=[];Vue.directive("require-global",{bind:$mctrl.get("VComp").require_global}),Vue.directive("require-local",{bind:$mctrl.get("VComp").require_local});var vueMixins={common:{data:function(){return{}},created:function(){$mctrl.get("Events").log({component_created:this.$options.name},this)},methods:{logEvent:function(t){$mctrl.get("aCRM").logEvent(t,this)},getFlag:function(t){return this.$store.getters.getFlag(t)}}},auth:{created:function(){var t=this.$store,e=this.$router;t.getters.getFlag("isAuth")||e.push("/public/login/")}},public:{},block_container__block_field__edit:{props:["params","index","block","value"],inject:["getContext","getContainer"],data:function(){return{real:void 0!==this.value?this.value:null,visible:this.value,flags:{required:this.block.field.required,private:this.block.field.private,multiple:this.block.field.multiple}}},created:function(){this.$options.template="#"+this.$options.name},watch:{real:function(t,e){this.block.callback(t)},visible:function(t,e){this.real=t}},method:{}},block_container__block_field__view:{props:["params","index","block","value"],inject:["getContext","getContainer"],data:function(){return{flags:{}}},created:function(){this.$options.template="#"+this.$options.name}},block_container__block_field__button:{props:["params","index","block","value"],inject:["getContext","getContainer"],data:function(){return{flags:{}}},created:function(){this.$options.template="#"+this.$options.name}}},vuexModules={session:{state:{session:{profile:null},photo:{},flags:{menuOpen:!1,isAuth:!1,isLoading:!0,isDev:$mctrl.get("isDev"),classesLoaded:!1,nearStranger:!1,errorViewer:!0}},mutations:{setFlag:function(t,e){if(t&&t.flags&&e&&Object.keys(e).length)for(var i in e)Vue.set(t.flags,i,e[i])},setSession:function(t,e){t&&(t.session=e)},setSessionPhoto:function(t,e){t&&(t.photo=e)}},getters:{getFlag:function(e,t,i){return function(t){return e&&e.flags&&e.flags[t]}},getSession:function(t,e,i){return function(){return t&&t.session?t.session:null}},hasAccess:function(t,a,e){return function(t,e,i){var s=!1;if(a.getFlag("isAuth")&&t){var n=a.getSession();if(n&&n.profile.access){var o=n.profile.access;o[t]&&o[t][e]&&(void 0===i&&(i=0),s=(s=-1<o[t][e].indexOf(""+i))||-1<o[t][e].indexOf("0"))}}return s}}},actions:{setSession:function(t,e){if(t.commit("setSession",e),t.state.session&&t.state.session.profile){if(t.state.session.profile.item&&t.state.session.profile.item.id?t.commit("setFlag",{isAuth:!0}):t.commit("setFlag",{isAuth:!1}),t.state.session.profile.data){var i=parseInt(t.state.session.profile.data.nearStranger);t.commit("setFlag",{nearStranger:i})}}else t.commit("setFlag",{isAuth:!1})},setSessionPhoto:function(t,e){t.commit("setSessionPhoto",e)}}},menu:{state:{left_pos1:[{title:"Живая лента",path:"/mainpage/"},{title:"Сущности",path:"/auth/admin/entity/classes/"}],sale:[{title:"Осмотры",path:"/inspections/"},{title:"Входящие звонки",path:"/incomings/"},{title:"Встречи",path:"/meetings/"},{title:"ДОУ продажа",path:"/contract/sale/"},{title:"Реклама",path:"/contract/ad/"}],bay:[{title:"Входящие звонки",path:"/incomings/"},{title:"Показы",path:"/shows/"},{title:"Встречи",path:"/meetings/"},{title:"ДОУ покупка",path:"/contract/bay/"}],company:[{title:"Сотрудники",path:"/team/"},{title:"Чат",path:"#Чат"},{title:"Форум",path:"#Форум"},{title:"Обучение",path:"#Обучение"}],bases:[{title:"Клиенты",path:"#Клиенты"},{title:"Объявления",path:"#Объявления"},{title:"Новостройки",path:"#Новостройки"}],left:[]}},errors:{state:{errors:[]},mutations:{saveError:function(t,e){e&&(e.created_at=(new Date).getTime(),t.errors.push(e))}},getters:{getErrors:function(t,e,i){return t.errors}}},modals:{state:{modals:[]},mutations:{openModal:function(t,e){e&&(e.params||(e.params={}),t.modals.push(e))},closeModal:function(t,e){if(e&&e.uid&&t.modals&&t.modals.length)for(var i in t.modals){t.modals[i].uid==e.uid&&t.modals.splice(i,1)}}},getters:{getModals:function(t,e,i){return t.modals}}},uploads:{state:{uploads_in_process:{},uploaded:[]},mutations:{createUploadTask:function(t,e){e&&(e.percent||(e.percent=0),Vue.set(t.uploads_in_process,e.uid,e))},archiveUploadTask:function(t,e){if(e&&t.uploads_in_process[e.uid]){var i=t.uploads_in_process[e.uid];Vue.delete(t.uploads_in_process,e.uid),t.uploaded.push(i)}},setUploadProcessPercent:function(t,e){t.uploads_in_process[e.uid]&&(t.uploads_in_process[e.uid].percent=e.percent)}},getters:{getUploadsInProcess:function(t,e,i){return t.uploads_in_process},getUploaded:function(t,e,i){return t.uploaded}},actions:{uploadFile:function(n,o){var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("name",o.namespace),o.multiple&&a.setAttribute("multiple","multiple"),a.onchange=function(){if(a.files&&a.files.length)for(var t=0;t<a.files.length;t++)!function(t){var e=$mctrl.randstr(),s={uid:e,namespace:o.namespace||e,title:t.name,size:t.size,percent:0};n.commit("createUploadTask",s),$mctrl.get("Api").upload("Upload/Multiple",[t],{namespace:s.namespace},function(t,e,i){a.parentNode&&a.parentNode.removeChild(a),o.cb&&o.cb(t,e,i),setTimeout(function(){n.commit("archiveUploadTask",s)},5e3)},function(t){n.commit("setUploadProcessPercent",{uid:e,percent:t})})}(a.files[t])},a.click()}}}};